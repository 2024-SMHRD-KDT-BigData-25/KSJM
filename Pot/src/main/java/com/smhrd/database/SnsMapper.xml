<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SnsMapper">

	<insert id="write" parameterType="com.smhrd.model.PotSns">
		insert into tb_sns(user_id, sns_title, sns_img, sns_content) values (#{user_id}, #{sns_title}, #{sns_img}, #{sns_content})
	</insert>
	
	
		<!-- 여러개의 행을 가져올 때: resultType -> 리스트 내의 각 아이템의 타입 -->
	<select id="select" resultType="com.smhrd.model.PotSns">
		select sns_idx, sns_title, user_id, TO_CHAR(created_at, 'YYYY-MM-DD') AS created_at, sns_likes, sns_views from tb_sns order by sns_idx desc
	</select>
	
	<select id="getBoard" parameterType="int" resultType="com.smhrd.model.PotSns">
		select user_id, sns_title, sns_img, sns_content, TO_CHAR(created_at, 'YYYY-MM-DD') AS created_at, sns_views, sns_likes from tb_sns where sns_idx=#{sns_idx}
	</select>
	
	<!-- 조회수 증가 -->
	<update id="views">
		update tb_sns set sns_views = sns_views + 1 where sns_idx = #{sns_idx}
	</update>
	

	
</mapper>